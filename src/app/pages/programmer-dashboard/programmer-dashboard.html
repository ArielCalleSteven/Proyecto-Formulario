<div class="min-h-screen bg-[#050505] p-4 md:p-8 font-mono relative overflow-hidden flex flex-col">
  
  <div class="absolute inset-0 opacity-10 pointer-events-none" 
       style="background-image: linear-gradient(#333 1px, transparent 1px), linear-gradient(90deg, #333 1px, transparent 1px); background-size: 40px 40px;">
  </div>

  <div class="relative z-10 flex flex-col md:flex-row justify-between items-center mb-8 border-b border-gray-800 pb-4">
    
    <div class="flex items-center gap-4 w-full md:w-auto mb-4 md:mb-0">
      <div class="w-12 h-12 border border-[#FF003C] text-[#FF003C] flex items-center justify-center font-bold text-xl bg-[#FF003C]/10 shadow-[0_0_15px_rgba(255,0,60,0.2)]">
        {{ myProfile?.name?.substring(0,2).toUpperCase() || 'OP' }}
      </div>
      <div>
        <h1 class="text-2xl font-black text-white tracking-widest uppercase" style="font-family: 'Orbitron', sans-serif;">
          DEV <span class="text-[#FF003C]">NEXUS</span>
        </h1>
        <div class="flex items-center gap-2 text-[10px] text-gray-500 tracking-[0.2em] uppercase">
          <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse shadow-[0_0_5px_#22c55e]"></span>
          System Online // {{ myProfile?.name }}
        </div>
      </div>
    </div>

    <div class="flex gap-3">
      <button [routerLink]="['/portfolio', myProfile?.id]" class="btn btn-sm bg-transparent border border-cyan-500 text-cyan-400 hover:bg-cyan-500/10 hover:text-white hover:shadow-[0_0_15px_#06b6d4] rounded-sm tracking-widest font-normal text-xs">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" /></svg>
        VIEW PUBLIC_PORTFOLIO
      </button>
      <button (click)="logout()" class="btn btn-sm btn-square bg-[#111] border border-gray-700 text-red-500 hover:bg-red-900/20 hover:border-red-500 rounded-sm" title="ABORT_SESSION">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" /></svg>
      </button>
    </div>
  </div>

  <div *ngIf="isLoading" class="flex-grow flex flex-col items-center justify-center gap-4">
    <span class="loading loading-bars loading-lg text-[#FF003C]"></span>
    <span class="text-xs text-gray-500 animate-pulse tracking-widest">INITIALIZING_MODULES...</span>
  </div>

  <div *ngIf="!isLoading && myProfile" class="relative z-10 flex-grow flex flex-col gap-8">

    <div class="w-full bg-[#0a0a0a] border border-gray-800 p-6 relative overflow-hidden group">
      <div class="absolute top-0 left-0 w-1 h-full bg-gradient-to-b from-[#FF003C] to-purple-600"></div>
      
      <div class="flex justify-between items-start relative z-10">
        <div>
          <h2 class="text-3xl text-white font-bold mb-2 flex items-center gap-2" style="font-family: 'Orbitron', sans-serif;">
            WELCOME_BACK, <span class="text-[#FF003C]">{{ myProfile.name }}</span>
          </h2>
          <p class="text-gray-500 text-xs max-w-2xl tracking-wide font-mono">
            >> Panel de control operativo. Gestiona tus despliegues de código y solicitudes de enlace entrantes.
          </p>
        </div>
        <div class="hidden md:block text-gray-800">
          <svg width="80" height="40" viewBox="0 0 100 50" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M0 25H100M25 0V50M75 0V50" stroke="currentColor" stroke-width="1"/>
          </svg>
        </div>
      </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 h-full">
      
      <div class="flex flex-col gap-4">
        <h3 class="text-sm font-bold text-gray-400 flex items-center gap-2 tracking-[0.2em] uppercase border-b border-gray-800 pb-2">
          <span class="text-[#FF003C]">●</span> INCOMING REQUESTS
        </h3>

        <div *ngIf="appointments.length === 0" class="flex-grow min-h-[300px] border border-gray-800 bg-[#080808] flex flex-col items-center justify-center relative p-8 text-center">
          <div class="absolute top-0 right-0 w-3 h-3 border-t border-r border-[#FF003C]"></div>
          <div class="absolute bottom-0 left-0 w-3 h-3 border-b border-l border-[#FF003C]"></div>
          
          <div class="p-4 bg-gray-900/50 border border-gray-700 text-gray-400 text-xs tracking-widest font-mono mb-2">
            // NO_DATA_FOUND
          </div>
          <p class="text-[10px] text-gray-600 animate-pulse">ESPERANDO NUEVAS TRANSMISIONES...</p>
        </div>

        <div *ngIf="appointments.length > 0" class="flex flex-col gap-4">
          <div *ngFor="let app of appointments" class="bg-[#0a0a0a] border border-gray-800 p-5 hover:border-[#FF003C] transition-all group relative">
            
            <div class="absolute top-0 right-0 p-2">
               <span class="text-[10px] font-bold px-2 py-1 uppercase tracking-wider border"
                     [ngClass]="{
                       'border-yellow-600 text-yellow-500 bg-yellow-900/10': app.status === 'Pendiente',
                       'border-green-600 text-green-500 bg-green-900/10': app.status === 'Aprobada',
                       'border-red-600 text-red-500 bg-red-900/10': app.status === 'Rechazada'
                     }">
                 {{ app.status }}
               </span>
            </div>

            <div class="mb-3">
              <span class="text-[10px] text-gray-600 font-mono block mb-1">SOURCE_ID:</span>
              <h4 class="text-white font-bold text-lg tracking-wide">{{ app.studentEmail }}</h4>
            </div>

            <div class="grid grid-cols-2 gap-4 mb-4 border-b border-gray-900 pb-3">
              <div>
                <span class="text-[10px] text-gray-600 block">TARGET_DATE</span>
                <span class="text-sm text-gray-300 font-mono">{{ app.date }}</span>
              </div>
              <div>
                <span class="text-[10px] text-gray-600 block">TARGET_TIME</span>
                <span class="text-sm text-gray-300 font-mono">{{ app.time }}</span>
              </div>
            </div>
            
            <p class="text-gray-500 text-xs mb-4 italic border-l-2 border-gray-700 pl-3">"{{ app.comment }}"</p>

            <div *ngIf="app.status === 'Pendiente'">
              <textarea [(ngModel)]="app.replyMessage" class="textarea textarea-sm bg-[#111] border-gray-700 w-full text-white mb-3 focus:border-[#FF003C] focus:outline-none rounded-sm text-xs font-mono" placeholder=">> Ingresar protocolo de respuesta..."></textarea>
              <div class="flex gap-2">
                <button class="btn btn-sm bg-[#FF003C] hover:bg-[#FF003C]/80 rounded-sm font-bold text-white flex-1 border-0 tracking-wider text-xs" (click)="respondAppointment(app, 'Aprobada')">AUTORIZAR</button>
                <button class="btn btn-sm btn-outline border-gray-600 text-gray-400 hover:text-white rounded-sm flex-1 text-xs" (click)="respondAppointment(app, 'Rechazada')">DENEGAR</button>
              </div>
            </div>

            <div *ngIf="app.status !== 'Pendiente'" class="bg-gray-900/30 p-3 border border-gray-800">
              <p class="text-[10px] text-gray-500 mb-2 font-mono">> LOG_RESPONSE: <span class="text-gray-300">{{ app.programmerResponse }}</span></p>
              <div class="flex gap-2 items-center">
                <span class="text-[10px] text-[#FF003C] font-bold">ESTABLISH_COMMS:</span>
                <button class="btn btn-xs rounded-none bg-green-900/20 text-green-500 border border-green-900 hover:bg-green-500 hover:text-black" (click)="notifyStudent(app, 'whatsapp')">WHATSAPP</button>
                <button class="btn btn-xs rounded-none bg-white/5 text-white border border-gray-600 hover:bg-white hover:text-black" (click)="notifyStudent(app, 'email')">EMAIL</button>
              </div>
            </div>

          </div>
        </div>
      </div>

      <div class="flex flex-col gap-4">
        <div class="flex justify-between items-center border-b border-gray-800 pb-2">
          <h3 class="text-sm font-bold text-gray-400 flex items-center gap-2 tracking-[0.2em] uppercase">
            <span class="text-cyan-500">●</span> PROJECT REPOSITORY
          </h3>
          <button class="btn btn-xs border-0 bg-cyan-600 text-white hover:bg-cyan-500 rounded-sm font-bold shadow-[0_0_10px_#0891b2] tracking-wider" (click)="openModal()">
            + INICIAR PROYECTO
          </button>
        </div>

        <div *ngIf="!myProfile.projects || myProfile.projects.length === 0" class="flex-grow min-h-[300px] border border-gray-800 bg-[#080808] flex flex-col items-center justify-center relative p-8">
          <div class="absolute bottom-0 left-0 w-3 h-3 border-b border-l border-cyan-500"></div>
          <div class="absolute top-0 right-0 w-3 h-3 border-t border-r border-cyan-500"></div>

          <div class="w-16 h-16 border border-dashed border-gray-700 rounded-full flex items-center justify-center text-gray-600 mb-4 animate-pulse">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" /></svg>
          </div>
          <p class="text-gray-500 text-xs font-mono">DATABASE EMPTY.</p>
          <button class="btn btn-link no-underline text-cyan-500 hover:text-white text-xs" (click)="openModal()">[UPLOAD_FIRST_ENTRY]</button>
        </div>

        <div *ngIf="myProfile.projects && myProfile.projects.length > 0" class="grid gap-4">
          <div *ngFor="let p of myProfile.projects; let i = index" class="bg-[#0a0a0a] border border-gray-700 p-5 relative group hover:border-cyan-500 transition-colors">
            
            <div class="flex justify-between items-start mb-2">
              <div>
                <h4 class="text-white font-bold text-base tracking-wide">{{ p.title }}</h4>
                <div class="flex gap-2 mt-1">
                  <span class="text-[10px] border border-gray-600 px-1 text-gray-400 bg-gray-900 uppercase">{{ p.category }}</span>
                  <span class="text-[10px] text-cyan-600 font-mono border border-cyan-900/30 px-1 bg-cyan-900/10">{{ p.role }}</span>
                </div>
              </div>
              <div class="flex gap-2 opacity-50 group-hover:opacity-100 transition-opacity">
                <button class="text-gray-400 hover:text-cyan-400 text-[10px] border border-gray-700 px-1" (click)="openEditModal(p, i)">EDIT</button>
                <button class="text-gray-400 hover:text-[#FF003C] text-[10px] border border-gray-700 px-1" (click)="askDeleteProject(i)">DEL</button>
              </div>
            </div>
            
            <p class="text-gray-500 text-xs mt-3 line-clamp-2 font-mono border-l border-gray-800 pl-2 leading-relaxed">{{ p.description }}</p>
            
            <div class="mt-4 pt-3 border-t border-gray-800 flex justify-between items-center text-[10px] text-gray-600 font-mono">
              <span>STACK: {{ p.tech ? p.tech.length : 0 }} MODULES</span>
              <a *ngIf="p.repo" [href]="p.repo" target="_blank" class="text-gray-400 hover:text-white flex items-center gap-1">
                REPO_LINK <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" /></svg>
              </a>
            </div>
          </div>
        </div>
      </div>

    </div>

    <div class="mt-auto pt-4 border-t border-gray-900 text-[10px] text-gray-700 font-mono flex justify-between items-center">
      <div class="flex gap-6">
        <div>
          <span class="text-cyan-700 block">CPU</span>
          12%
        </div>
        <div>
          <span class="text-red-900 block">MEM</span>
          4.2 TB
        </div>
        <div>
          <span class="text-yellow-700 block">NET</span>
          SECURE
        </div>
      </div>
      <div class="tracking-widest opacity-50">
        V 2.0.77 // NIGHT_CITY_SERVER_01
      </div>
    </div>

  </div>
</div>